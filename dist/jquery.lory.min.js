!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.lory=b()}):"object"==typeof exports?module.exports=b():a.lory=b()}(this,function(){"use strict";var a=function(a,b){if("undefined"==typeof b&&(b=a,a=0),a>b){var c=a;a=b,b=c}return function(c){return Math.min(Math.max(c,a),b)}},b=function(a,b){var c={};return Object.keys(b).map(function(d){a&&a.hasOwnProperty(d)?c[d]=a[d]:c[d]=b[d]}),c},c=function(c,d){var e,f,g,h,i,j,k=0,l={};"undefined"!=typeof jQuery&&c instanceof jQuery&&(c=c[0]);var m,n,o,p=c.querySelector(".js_frame"),q=p.querySelector(".js_slides"),r=c.querySelector(".js_prev"),s=c.querySelector(".js_next"),t={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,centerMode:!1,beforeInit:function(){return!0},afterInit:function(){return!0},beforePrev:function(){return!0},beforeNext:function(){return!0},beforeMove:function(){return!0},beforeResize:function(){return!0}},u=function(a){var b=a.slice(0,l.infinite),c=a.slice(a.length-l.infinite,a.length);return b.forEach(function(a){var b=a.cloneNode(!0);q.appendChild(b)}),c.reverse().forEach(function(a){var b=a.cloneNode(!0);q.insertBefore(b,q.firstChild)}),q.addEventListener("webkitTransitionEnd",C),q.addEventListener("msTransitionEnd",C),q.addEventListener("oTransitionEnd",C),q.addEventListener("otransitionend",C),q.addEventListener("transitionend",C),Array.prototype.slice.call(q.children)},v=function(){l=b(d,t),l.beforeInit(),l.centerMode&&!l.infinite&&console.warn("You use centerMode option, with specific odd number infinite option required."),e={x:q.offsetLeft,y:q.offsetTop},i=Array.prototype.slice.call(q.children),h=l.infinite?u(Array.prototype.slice.call(q.children)):Array.prototype.slice.call(q.children),w(),r&&s&&(r.addEventListener("click",x),s.addEventListener("click",y)),q.addEventListener("touchstart",D),window.addEventListener("resize",G),l.afterInit()},w=function(){f=q.getBoundingClientRect().width||q.offsetWidth,g=p.getBoundingClientRect().width||p.offsetWidth,k=0,l.infinite&&(k+=l.infinite),l.centerMode&&(k-=Math.floor(l.infinite/2)),l.infinite?(A(-1*h[k].offsetLeft,0,null),e.x=-1*h[k].offsetLeft):A(0,l.rewindSpeed,l.ease)},x=function(){l.beforePrev(),B(!1,!1)},y=function(){l.beforeNext(),B(!1,!0)},z=function(){var a=k;return a>i.length&&(a-=i.length),l.centerMode&&(a-=Math.floor(l.infinite/2)),l.centerMode&&0>=a&&(a=i.length+a),a},A=function(a,b,c){var d=q&&q.style;d&&(d.webkitTransitionTimingFunction=d.MozTransitionTimingFunction=d.msTransitionTimingFunction=d.OTransitionTimingFunction=d.transitionTimingFunction=c,d.webkitTransitionDuration=d.MozTransitionDuration=d.msTransitionDuration=d.OTransitionDuration=d.transitionDuration=b+"ms",d.webkitTransform="translate3d("+a+"px, 0, 0)",d.msTransform=d.MozTransform=d.OTransform="translateX("+a+"px)")},B=function(b,c){var d=f-g,i=a(0,h.length-1),m=a(-1*d,0),n=l.slideSpeed,o=l.slidesToScroll;l.centerMode&&(o=1),"number"!=typeof b&&(b=c?k+o:k-o),b=i(b),l.infinite&&void 0===c&&(b+=l.infinite,b-=Math.floor(l.infinite/2));var p=m(-1*h[b].offsetLeft);l.rewind&&Math.abs(e.x)===d&&c&&(p=0,b=0,n=l.rewindSpeed),h[b].offsetLeft<=d&&(k=b),A(p,n,l.ease),e.x=p;var q=!(l.infinite&&Math.abs(p)===d&&c),r=!(l.infinite&&0===Math.abs(p)&&!c);q||(k=l.infinite,e.x=-1*h[k].offsetLeft,j=function(){A(-1*h[k].offsetLeft,0,null)}),r||(k=h.length-2*l.infinite,e.x=-1*h[k].offsetLeft,j=function(){A(-1*h[k].offsetLeft,0,null)})},C=function(){j&&(j(),j=void 0)},D=function(a){l.beforeMove();var b=a.touches[0];m={x:b.pageX,y:b.pageY,time:Date.now()},o=void 0,n={},q.addEventListener("touchmove",E),q.addEventListener("touchend",F)},E=function(a){var b=a.touches[0];n={x:b.pageX-m.x,y:b.pageY-m.y},"undefined"==typeof o&&(o=!!(o||Math.abs(n.x)<Math.abs(n.y))),o||A(e.x+n.x,0,null)},F=function(){var a=Date.now()-m.time,b=Number(a)<300&&Math.abs(n.x)>25||Math.abs(n.x)>g/3,c=!k&&n.x>0||k===h.length-1&&n.x<0,d=n.x<0;o||(b&&!c?B(!1,d):A(e.x,l.snapBackSpeed)),p.removeEventListener("touchmove"),p.removeEventListener("touchend")},G=function(){l.beforeResize(),w()};return v(),{setup:function(){v()},reset:function(){w()},slideTo:function(a){B(a)},current:z,prev:x,next:y}};return $.fn.lory=function(a){return this.each(function(){var b;$.data(this,"lory")||(b=$.extend({},a,$(this).data()),$.data(this,"lory",c(this,b)))})},c});