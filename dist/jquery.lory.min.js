!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.lory=b()}):"object"==typeof exports?module.exports=b():a.lory=b()}(this,function(){"use strict";var a=function(a,b){if("undefined"==typeof b&&(b=a,a=0),a>b){var c=a;a=b,b=c}return function(c){return Math.min(Math.max(c,a),b)}},b=function(a,b){var c={};return Object.keys(b).map(function(d){a&&a.hasOwnProperty(d)?c[d]=a[d]:c[d]=b[d]}),c},c=function(c,d){var e,f,g,h,i,j=0,k={};"undefined"!=typeof jQuery&&c instanceof jQuery&&(c=c[0]);var l,m,n,o=c.querySelector(".js_frame"),p=o.querySelector(".js_slides"),q=c.querySelector(".js_prev"),r=c.querySelector(".js_next"),s="js_cloneslide",t="js_currentslide",u={slidesToScroll:1,slideSpeed:300,rewindSpeed:600,snapBackSpeed:200,ease:"ease",rewind:!1,infinite:!1,centerMode:!1,beforeInit:function(){return!0},afterInit:function(){return!0},beforePrev:function(){return!0},beforeNext:function(){return!0},beforeMove:function(){return!0},beforeResize:function(){return!0}},v=function(a){var b=a.slice(0,k.infinite),c=a.slice(a.length-k.infinite,a.length);return b.forEach(function(a){var b=a.cloneNode(!0);b.classList.add(s),p.appendChild(b)}),c.reverse().forEach(function(a){var b=a.cloneNode(!0);b.classList.add(s),p.insertBefore(b,p.firstChild)}),p.addEventListener("webkitTransitionEnd",E),p.addEventListener("msTransitionEnd",E),p.addEventListener("oTransitionEnd",E),p.addEventListener("otransitionend",E),p.addEventListener("transitionend",E),Array.prototype.slice.call(p.children)},w=function(a){var b=h;return k.infinite&&(b=Array.prototype.filter.call(h,function(a){return!a.classList.contains(s)})),Array.prototype.forEach.call(h,function(a){a.classList.remove(t)}),k.infinite&&j-Math.floor(k.infinite/2)>b.length||a<B()?void h[j+Math.floor(k.infinite/2)].classList.add(t):k.centerMode?void b[B()-1].classList.add(t):k.infinite&&B()!==a?void h[a+k.slidesToScroll+Math.floor(k.infinite/2)-1].classList.add(t):k.infinite?void b[a-1].classList.add(t):void(k.centerMode&&k.infinite||h[a].classList.add(t))},x=function(){k=b(d,u),k.beforeInit(),e={x:p.offsetLeft,y:p.offsetTop},h=k.infinite?v(Array.prototype.slice.call(p.children)):Array.prototype.slice.call(p.children),y(),q&&r&&(q.addEventListener("click",z),r.addEventListener("click",A)),p.addEventListener("touchstart",F),window.addEventListener("resize",I),k.afterInit()},y=function(){f=p.getBoundingClientRect().width||p.offsetWidth,g=o.getBoundingClientRect().width||o.offsetWidth,j=0,k.centerMode&&(j-=Math.floor(k.infinite/2)),k.infinite&&(j+=k.infinite),w(j),k.centerMode||k.infinite?(C(-1*h[j].offsetLeft,0,null),e.x=-1*h[j].offsetLeft):C(0,k.rewindSpeed,k.ease)},z=function(){k.beforePrev(),D(!1,!1)},A=function(){k.beforeNext(),D(!1,!0)},B=function(){var a=h,b=j;return k.infinite&&(a=Array.prototype.filter.call(h,function(a){return!a.classList.contains(s)})),b>a.length&&(b-=a.length),k.centerMode&&(b-=Math.floor(k.infinite/2)),k.centerMode&&0>=b&&(b=a.length+b),b},C=function(a,b,c){var d=p&&p.style;d&&(d.webkitTransitionTimingFunction=d.MozTransitionTimingFunction=d.msTransitionTimingFunction=d.OTransitionTimingFunction=d.transitionTimingFunction=c,d.webkitTransitionDuration=d.MozTransitionDuration=d.msTransitionDuration=d.OTransitionDuration=d.transitionDuration=b+"ms",d.webkitTransform="translate3d("+a+"px, 0, 0)",d.msTransform=d.MozTransform=d.OTransform="translateX("+a+"px)")},D=function(b,c){var d=f-g,l=a(0,h.length-1),m=a(-1*d,0),n=k.slideSpeed,o=k.slidesToScroll;k.centerMode&&(o=1),b||(b=c?j+o:j-o),b=l(b);var p=m(-1*h[b].offsetLeft);k.rewind&&Math.abs(e.x)===d&&c&&(p=0,b=0,n=k.rewindSpeed),h[b].offsetLeft<=d&&(j=b),C(p,n,k.ease),e.x=p;var q=!(k.infinite&&Math.abs(p)===d&&c),r=!(k.infinite&&0===Math.abs(p)&&!c);q||(j=k.infinite,e.x=-1*h[j].offsetLeft,i=function(){C(-1*h[j].offsetLeft,0,null)}),r||(j=h.length-2*k.infinite,e.x=-1*h[j].offsetLeft,i=function(){C(-1*h[j].offsetLeft,0,null)}),w(j)},E=function(){i&&(i(),i=void 0)},F=function(a){k.beforeMove();var b=a.touches[0];l={x:b.pageX,y:b.pageY,time:Date.now()},n=void 0,m={},p.addEventListener("touchmove",G),p.addEventListener("touchend",H)},G=function(a){var b=a.touches[0];m={x:b.pageX-l.x,y:b.pageY-l.y},"undefined"==typeof n&&(n=!!(n||Math.abs(m.x)<Math.abs(m.y))),n||C(e.x+m.x,0,null)},H=function(){var a=Date.now()-l.time,b=Number(a)<300&&Math.abs(m.x)>25||Math.abs(m.x)>g/3,c=!j&&m.x>0||j===h.length-1&&m.x<0,d=m.x<0;n||(b&&!c?D(!1,d):C(e.x,k.snapBackSpeed)),o.removeEventListener("touchmove"),o.removeEventListener("touchend")},I=function(){k.beforeResize(),y()};return x(),{setup:function(){x()},reset:function(){y()},slideTo:function(a){D(a)},current:B,prev:z,next:A}};return $.fn.lory=function(a){return this.each(function(){var b;$.data(this,"lory")||(b=$.extend({},a,$(this).data()),$.data(this,"lory",c(this,b)))})},c});